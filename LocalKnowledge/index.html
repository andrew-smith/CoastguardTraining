<!--
You are free to copy and use this sample in accordance with the terms of the
Apache license (http://www.apache.org/licenses/LICENSE-2.0.html)
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Local Knowledge</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="islands.js"></script>
    <script type="text/javascript">
    
        var map;
        var marker;

        function initialize() {
            var mapDiv = document.getElementById('map-canvas');
            map = new google.maps.Map(mapDiv, {
                center: new google.maps.LatLng(-36.836767,174.766281),
                zoom: 13,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            var styleArray = [
                {
                    "elementType": "labels",
                    "stylers": [
                        { "visibility": "off" }
                    ]
                }
            ];

            map.setOptions({styles: styleArray});
            
            goToNextIsland();
        }


        google.maps.event.addDomListener(window, 'load', initialize);
        
        
        function goToNextIsland()
        {
            var island = RandomIsland();
            mapIsland(island);
        }
        
        function mapIsland(island)
        {
            //clear marker
            if(marker)
                marker.setMap(null);
            
            //create location
            var location = new google.maps.LatLng(island.coords[0], island.coords[1]);
            
            //pan to location
            map.panTo(location);
            
            //set marker
            marker = new google.maps.Marker({
                position: location,
                map: map
            });
            
            //show name
            $("#islandName").text(island.name);
        
        }
        
        
        $(function() {
            $("#next_island_btn").click(function() {
               goToNextIsland(); 
            });
        });

    </script>
  </head>
  <body style="font-family: Arial; border: 0 none;">
    <div id="map-canvas" style="width: 640px; height: 480px"></div>
    
    <p id="islandName">    </p>
    <button id="next_island_btn">Next Island</button>
  </body>
</html>
â€‹
